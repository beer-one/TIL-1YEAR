# 서비스

K8s에서 서비스는 일련의 파드로 구동 중인 애플리케이션을 네트워크 서비스로서 외부로 노출시키는 추상적인 방법이다.

K8s를 사용하면 익숙하지 않은 서비스 디스커버리 매커니즘을 사용하기 위해 애플리케이션을 변경할 필요가 없다. K8s는 파드에게 고유의 IP 주소와 파드 집합에 대한 하나의 DNS 이름을 부여하고 파드 집합에 대해 로드밸런싱을 수행할 수 있다.

파드는 클러스터의 상태에 맞게 생성되고 삭제되기 때문에 파드는 영구적인 리소스는 아니다. 앱을 구동시키기 위해 디플로이먼트를 사용한다면, 파드를 동적으로 생성하고 삭제시킬 수 있다.

각 파드는 고유의 IP 주소를 가지지만 디플로이먼트에서는 한 시점에 실행되는 파드 집합이 잠시 후 실행되는 파드 집합과 다를 수 있다. 이러한 점은 문제를 일으키는데, 일부 파드 집합이 클러스터 내부의 다른 파드에게 어떤 기능을 제공하거나 프론트엔드가 백엔드의 기능을 사용하는 경우, 파드가 변경되면 변경된 파드의 IP주소를 알 수 없다. 이런 이유 때문에 서비스가 필요하다.



## 서비스 리소스

K8s에서 서비스는 논리적인 파드집합과 정책을 정의하는 추상이다. 셀렉터에 의해 서비스에 타게팅될 파드집합이 결정된다. 



### 클라우드 기반 서비스 디스커버리

애플리케이션에서 서비스 디스커버리 용도로 K8s API를 사용할 수 있다면 서비스 내 파드가 변경될 때 마다 업데이트되는 엔드포인트를 apiservice에 질의할 수 있다.

native 애플리케이션이 아닌 경우, K8s는 애플리케이션과 백엔드 파드 사이에 네트워크 포트 또는 로드밸런서를 두는 방식을 제공한다.



