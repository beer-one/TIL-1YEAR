# 네임스페이스

쿠버네티스의 물리 클러스터에서 여러 영역으로 나눌 수 있다. `네임스페이스` 를 이용하여 여러 개의 영역으로 나눌 수 있다. 이렇게 나눠진 가상의 영역을 가상 클러스터라고 불리기도 한다.

네임스페이스를 이용하여 여러 개의 논리적인 영역으로 나눌 수 있기 때문에, 여러 팀이 하나의 클러스터에서 사용하거나 하나의 클러스터에서 여러 프로젝트가 진행될 때 이를 구분짓기 위해 네임스페이스를 사용할 수 있다. 

네임스페이스는 이름의 범위를 제공하기 때문에 하나의 네임스페이스에서 쿠버네티스 오브젝트의 리소스 이름은 유일해야 한다. 즉, 다른 네임스페이스에 같은 오브젝트 리소스 이름은 겹쳐도 된다는 의미이다. 대신에 네임스페이스 이름은 하나의 클러스터에서는 중첩될 수 없다.



## 네임스페이스 조회

한 클러스터에서 네임스페이스를 조회하는 명령어는 다음과 같다. 

```shell
$ kubectl get namespace #ns
NAME              STATUS   AGE
default           Active   1d
kube-node-lease   Active   1d
kube-public       Active   1d
kube-system       Active   1d
```

* namespace는 `ns` 로 짧게 쓸 수 있다.

* 기본적으로 제공되는 네임스페이스는 4가지가 있다.

  * `default`: 네임스페이스를 지정하지 않은 오브젝트를 위한 기본 네임스페이스

  * `kube-system`: 쿠버네티스 시스템에서 생성한 오브젝트를 위한 네임스페이스
  * `kube-public`: 자동 생성되며 모든 사용자가 읽기 권한으로 접근할 수 있다. 클러스터 중에 공개적으로 읽을 수 있는 리소스를 위해 예약되어있다.
  * `kube-node-lease`: 클러스터가 스케일링될 때 노드 하트비트의 성능을 향상시키는 각 노드와 관련된 lease 오브젝트에 대한 네임스페이스



## 요청에 네임스페이스 설정하기

쿠버네티스 오브젝트를 생성하는 명령어에 `--namespace`  플래그를 이용하여 네임스페이스를 설정할 수 있다.

```shell
$ kubectl run nginx --image=nginx --namespace=<namespace>
```

* `--namespace` 는`-n` 로 짧게 사용할 수 있다.



## 자동으로 사용할 네임스페이스 저장

모든 kubectl 명령어에 사용하는 네임스페이스를 영구 저장할 수 있다.

```shell
$ kubectl config set-context --current --namespace=<namespace>

# 확인하기
$ kubectl config view --minify | grep namespace:
```

